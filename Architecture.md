# Архитектура ЭВМ М-20 #

Система команд машин М-220 и БЭСМ-4 расширена по сравнению с М-20.
Дополнительные команды (20, 40, 60, 17, 37, 57) здесь не описываются.

## Представление чисел ##
| **45**    | **44** | **43---37** | **36--------------------------------------1** |
|:----------|:-------|:------------|:----------------------------------------------|
| признак   | знак   | порядок     | мантисса                                      |

  * Знак равен 0 для положительных и 1 для отрицательных чисел.
  * Порядок смещён на 64.
  * Мантисса хранится в прямом коде как для положительных, так и для отрицательных чисел.
  * Ноль представлен нулями во всех битах.
  * Признак не имеет арифметического значения.

Формула такая: Значение = 0.Мантисса x (1 - Знак x 2) x 2<sup>(Порядок - 64)</sup>

Для нормализованных чисел бит 36 всегда равен 1.

### Пример: 1.0 ###
| **45** | **44** | **43-----37** | **36--------------------------------------1**  |
|:-------|:-------|:--------------|:-----------------------------------------------|
| x      | 0      | 1 000 001     | 100 000 000 000 000 000 000 000 000 000 000 000  |


### Пример: -1.0 ###
| **45** | **44**| **43-----37** | **36--------------------------------------1** |
|:-------|:------|:--------------|:----------------------------------------------|
|  x     |  1    |  1 000 001    | 100 000 000 000 000 000 000 000 000 000 000 000 |

## Представление команд ##
| **45**     | **44**     | **43**     | **42---37**  | **36------------25** | **24------------13** | **12------------1** |
|:-----------|:-----------|:-----------|:-------------|:---------------------|:---------------------|:--------------------|
|Признак А1  |Признак А2  |Признак А3  |Код операции  |Адрес 1               |Адрес 2               |Адрес 3              |

### Регистры ###
| **Сокращение** | **Название** | **Разрядность** | **Описание** |
|:---------------|:-------------|:----------------|:-------------|
| РА             | Регистр адреса      |  12 бит         | Прибавляется к адресу Аi, если в команде установлен соответствующий бит-признак. |
| Ω              | Управляющий сигнал  |  1 бит          | Устанавливается большинством команд. Используется в командах условного перехода.  |
|  РМР           | Регистр младших разрядов  |  36 бит         | Хранит младшую часть мантиссы результата умножения. Считывается командой 47. |

### Коды операций ###

У команд М-20 не было мнемонических обозначений, программирование велось
непосредственно в числовых обозначениях. Указанная в таблицах мнемоника
придумана автором (по аналогии с БЭСМ-6).

#### Арифметические операции ####
| **КОП** | **Мнемоника** | **Описание** |
|:--------|:--------------|:-------------|
|  01     |  с            | Сложение с округлением и нормализацией |
|  21     |  со           | Сложение без округления с нормализацией |
|  41     |  сн           | Сложение с округлением без нормализации |
|  61     |  сон          | Сложение без округления и без нормализации |
|  02     |  в            | Вычитание с округлением и нормализацией |
|  22     |  во           | Вычитание без округления с нормализацией |
|  42     |  вн           | Вычитание с округлением без нормализации |
|  62     |  вон          | Вычитание без округления и без нормализации |
|  03     |  ва           | Вычитание модулей с округлением и нормализацией |
|  23     |  вао          | Вычитание модулей без округления с нормализацией |
|  43     |  ван          | Вычитание модулей с округлением без нормализации |
|  63     |  ваон         | Вычитание модулей без округления и без нормализации |
|  04     |  д            | Деление с округлением |
|  24     |  до           | Деление без округления |
|  44     |  к            | Извлечение корня с округлением |
|  64     |  ко           | Извлечение корня без округления |
|  05     |  у            | Умножение с округлением и нормализацией |
|  25     |  уо           | Умножение без округления с нормализацией |
|  45     |  ун           | Умножение с округлением без нормализации |
|  65     |  уон          | Умножение без округления и без нормализации |
|  06     |  спа          | Сложение порядка с адресом |
|  26     |  спп          | Сложение порядков чисел |
|  46     |  впа          | Вычитание адреса из порядка |
|  66     |  впп          | Вычитание порядков чисел |
|  47     |  мрп          | Выдача младших разрядов произведения |

#### Логические операции ####
| **КОП** | **Мнемоника** | **Описание** |
|:--------|:--------------|:-------------|
|  00     |  п            | Пересылка    |
|  20     |  пкл          | Чтение пультовых тумблеров |
|  13     |  см           | Сложение команд |
|  33     |  вм           | Вычитание команд |
|  53     |  ск           | Сложение кодов операций |
|  73     |  вк           | Вычитание кодов операций |
|  14     |  сдма         | Сдвиг мантиссы по адресу |
|  34     |  сдмп         | Сдвиг мантиссы по порядку числа |
|  54     |  сдса         | Сдвиг по адресу |
|  74     |  сдсп         | Сдвиг по порядку числа |
|  15     |  н            | Поразрядное сравнение (исключаищее или) |
|  35     |  нс           | Поразрядное сравнение и останов машины по несовпадению |
|  55     |  и            | Логическое умножение (и) |
|  75     |  или          | Логическое сложение (или) |
|  07     |  цс           | Циклическое сложение (отдельно порядок и мантисса) |
|  27     |  цв           | Циклическое вычитание (отдельно порядок и мантисса) |
|  67     |  цсд          | Циклический сдвиг (на 24 по 48-разрядной сетке) |

#### Операции управления ####
| **КОП** | **Мнемоника** | **Описание** |
|:--------|:--------------|:-------------|
|  10     |  вв           | Ввод с перфокарт |
|  30     |  ввк          | Ввод с перфокарт без проверки контрольной суммы |
|  50     |  ма           | Подготовка обращения к внешнему устройству |
|  70     |  мб           | Выполнение обращения к внешнему устройству |
|  11     |  пем          | Сравнение и установка регистра адреса, переход по < и Ω=1 |
|  31     |  пен          | Сравнение и установка регистра адреса, переход по >= и Ω=1 |
|  51     |  пум          | Сравнение и установка регистра адреса, переход по < и Ω=0 |
|  71     |  пун          | Сравнение и установка регистра адреса, переход по >= и Ω=0 |
|  12     |  пм           | Сравнение и установка регистра адреса, переход по < |
|  32     |  пн           | Сравнение и установка регистра адреса, переход по >= |
|  52     |  ра           | Установка регистра адреса адресом |
|  72     |  рс           | Установка регистра адреса |
|  16     |  пв           | Передача управления с возвратом |
|  36     |  пе           | Передача управления по условию Ω=1 |
|  56     |  пб           | Передача управления |
|  76     |  пу           | Передача управления по условию Ω=0 |
|  77     |  стоп         | Останов машины |