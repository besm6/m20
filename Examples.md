# Примеры программ для М-20 #

Примеры взяты из книги Ляшенко.

## Пример 1 ##

Пусть требуется решить уравнение
| 1/32 x<sup>5</sup> - 3/4 x<sup>2</sup> - x + 4.005 = 0 |
|:-------------------------------------------------------|

если известно приближенное значение искомого корня
| x<sub>0</sub> = 2.0 |
|:--------------------|

Преобразуем уравнение к виду
| x = 1/32 x<sup>5</sup> - 3/4 x<sup>2</sup> + 4.005 |
|:---------------------------------------------------|

Так как производная функции
| у = 1/32 x<sup>5</sup> - 3/4 x<sup>2</sup> + 4.005 |
|:---------------------------------------------------|

в окрестности корня по абсолютной величине меньше единицы,
то итерационный процесс будет сходящимся.

Решать уравнение будем по формуле:
| x<sub>i+1</sub> = 1/32 x<sub>i</sub><sup>5</sup> - 3/4 x<sub>i</sub><sup>2</sup> + 4.005 |
|:-----------------------------------------------------------------------------------------|

пока не получим неравенства
| | x<sub>i+1</sub> - x<sub>i</sub> | < ε |
|:----------------------------------------|

Исходные данные расположены так:
| **Номер ячейки** | **0020**     | **0021** | **0022** | **0023**     | **0024** |
|:-----------------|:-------------|:---------|:---------|:-------------|:---------|
| Содержимое       | x<sub>0</sub> = 2 | 4.005    | 1/32     | ε = 0.0001   | 3/4      |

Рабочие ячейки начинаются с ячейки номер 4000.

| **Номер ячейки** | **Команда**           | **Вычисляемая величина** |
|:-----------------|:----------------------|:-------------------------|
|  0100            | 0 00 0020 0000 4000   | Засылка x<sub>0</sub>    |
|  0101            | 0 05 4000 4000 4001   | x<sub>i</sub><sup>2</sup>  |
|  0102            | 0 05 4001 4000 4002   | x<sub>i</sub><sup>3</sup>  |
|  0103            | 0 05 4002 4001 4002   | x<sub>i</sub><sup>5</sup>  |
|  0104            | 0 05 0022 4002 4002   | 1/32 x<sub>i</sub><sup>5</sup>  |
|  0105            | 0 05 4001 0024 4001   | 3/4 x<sub>i</sub><sup>2</sup>  |
|  0106            | 0 02 4002 4001 4001   | 1/32 x<sub>i</sub><sup>5</sup> - 3/4 x<sub>i</sub><sup>2</sup>  |
|  0107            | 0 01 0021 4001 4001   | x<sub>i+1</sub> = 1/32 x<sub>i</sub><sup>5</sup> - 3/4 x<sub>i</sub><sup>2</sup> + 4.005 |
|  0110            | 0 02 4001 4000 4002   | x<sub>i+1</sub> - x<sub>i</sub>  |
|  0111            | 0 03 4002 0023 0000   | |x<sub>i+1</sub> - x<sub>i</sub> | - | ε | |
|  0112            | 0 76 4001 0101 4000   | Пересылка x,,i+1, в 4000  |
|  0113            | 0 77 0000 0000 0000   | Остановка                |

Команда 0112 осуществляет передачу управления на следующую итерацию,
если
| | x<sub>i+1</sub> - x<sub>i</sub> | - | ε | >= 0 |
|:-------------------------------------------------|

и засылает в 4000 новое значение x<sub>i</sub>.
После окончания итераций в ячейке 4000 находится корень уравнения
| 1/32 x<sup>5</sup> - 3/4 x<sup>2</sup> - x + 4.005 = 0 |
|:-------------------------------------------------------|

Входной файл для эмулятора: [example1.m20](http://code.google.com/p/m20/source/browse/trunk/as/example1.m20).

Результат выполнения:
```
  $ sim20 example1.m20 
  2.003369e+00
```

Эта же программа, [переписанная на языке автокода](http://code.google.com/p/m20/source/browse/trunk/as/task1.s20):
```
х0      .вещ    2                       ; Константы
с4      .вещ    4.005
с1_32   .вещ    0.03125
эпсилон .вещ    0.0001
с3_4    .вещ    0.75

раб     .перем  3                       ; Рабочие ячейки

начало:                                 ; Команды
        зп      х0, , раб               ; Засылка x[0]
цикл:
        умн     раб, раб, раб+1         ; x[i]^2
        умн     раб+1, раб, раб+2       ; x[i]^3
        умн     раб+2, раб+1, раб+2     ; x[i]^5
        умн     с1_32, раб+2, раб+2     ; 1/32 x[i]^5
        умн     раб+1, с3_4, раб+1      ; 3/4 x[i]^2
        вч      раб+2, раб+1, раб+1     ; 1/32 x[i]^5 - 3/4 x[i]^2
        сл      с4, раб+1, раб+1        ; x[i+1] = 1/32 x[i]^5 - 3/4 x[i]^2 + 4.005
        вч      раб+1, раб, раб+2       ; x[i+1] - x[i]
        вчм     раб+2, эпсилон          ; | x[i+1] - x[i] | - | ε |
        по      раб+1, цикл, раб        ; Пересылка x[i+1] в 4000

        ма      02100, , раб            ; Печать результата
        мб      раб

        стоп                            ; Остановка
```

### Пример 2 ###

Требуется вычислить значение sin x с точностью до 10<sup>-4</sup> по ряду:
| sin x = x - x<sup>3</sup>/3! + x<sup>5</sup>/5! - ... |
|:------------------------------------------------------|

Если после использования 20 членов ряда такая точность не достигается,
дальнейшие вычисления прекратить и остановить машину.

В ячейке a+1 записана единица, а в a+2 - одна десятитысячная;
x находится в ячейке a+3; вычисленное значение sin x должно быть
послано в ячейку a+4.

Заметим, что каждый член, начиная со второго, может быть получен из
предыдущего умножением его на
| - x<sup>2</sup> / (n+1) / (n+2) |
|:--------------------------------|
где n - показатель степени при x в предыдущем члене. Так как ряд
для вычисления sin x знакопеременный, то остаточный член ряда,
определяющий точность, меньше по модулю последнего учтённого члена.

Программа для вычисления sin x может быть такой:

| **Адрес** | **Команда**            | **Вычисляемая величина** |
|:----------|:-----------------------|:-------------------------|
| k+1       | 0 00 a+3  0000 a+4     | Засылка x                |
| k+2       | 0 00 a+3  0000 c+1     | Засылка x                |
| k+3       | 0 00 a+1  0000 c+2     | Засылка единицы          |
| k+4       | 0 05 a+3  a+3  c+3     | x<sup>2</sup>            |
| k+5       | 0 02 0000 c+3  c+3     | - x<sup>2</sup>          |
| k+6       | 0 52 0000 0000 0000    | Очистка РА               |
| k+7       | 0 01 c+2  a+1  c+2     | n + 1                    |
| k+10      | 0 04 c+1  c+2  c+1     | 1/(n+1) x<sup>n</sup>/n! (-1)<sup>n-1</sup> |
| k+11      | 0 01 c+2  a+1  c+2     | n + 2                    |
| k+12      | 0 04 c+1  c+2  c+1     | 1/(n+1)/(n+2) x<sup>n</sup>/n! (-1)<sup>n-1</sup> |
| k+13      | 0 05 c+3  c+1  c+1     | Вычисление члена ряда    |
| k+14      | 0 01 a+4  c+1  a+4     | Вычисление суммы ряда    |
| k+15      | 0 03 c+1  a+2  0000    | Проверка точности        |
| k+16      | 1 51 0022 k+7  0001    |                          |
| k+17      | 0 36 0000 k+21 0000    | Обход остановки, если получена нужная точность |
| k+20      | 0 77 0000 0000 0000    | Остановка                |
| k+21      |  . .. .... .... ....   |                          |

Входной файл для эмулятора: [example2.m20](http://code.google.com/p/m20/source/browse/trunk/as/example2.m20).

Результат выполнения:
```
  $ sim20 example2.m20 
  4.794255e-01
```